# Webpack Example with Bundle Badger

This example demonstrates how to use Bundle Badger with a webpack project.

## Setup

```bash
npm install
```

## Build and Generate Stats

```bash
# Build your project and generate stats.json
npm run build:stats
```

## Run Bundle Badger

```bash
# Dry run (prints report to console)
npm run badger

# Or use bundle-badger directly
npx bundle-badger --stats ./stats.json --dry-run
```

## GitLab CI Integration

Add this to your `.gitlab-ci.yml`:

```yaml
bundle-analysis:
  stage: test
  image: node:20
  script:
    - npm ci
    - npm run build:stats
    - npx bundle-badger --stats ./stats.json
  only:
    - merge_requests
  environment:
    name: review/$CI_MERGE_REQUEST_IID
```

## With Baseline Comparison

To compare against a baseline (e.g., main branch):

```yaml
bundle-analysis:
  stage: test
  image: node:20
  before_script:
    - npm ci
  script:
    # Build current MR stats
    - npm run build:stats
    - mv stats.json stats-current.json

    # Build baseline stats from main branch
    - git fetch origin main
    - git checkout origin/main
    - npm ci
    - npm run build:stats
    - mv stats.json stats-baseline.json
    - git checkout -

    # Compare
    - npx bundle-badger --stats ./stats-current.json --baseline ./stats-baseline.json --threshold 5%
  only:
    - merge_requests
```

## Expected Output

Bundle Badger will post a comment to your GitLab MR with a report like:

```markdown
## ðŸ¦¡ Bundle Badger Report

| File | Before | After | Diff |
| ---- | -----: | ----: | ---: |
| `main.abc123.js` | 142.3 kB | 148.7 kB | +6.4 kB (+4.5%) ðŸŸ¡ |
| `vendor.def456.js` | 89.2 kB | 89.2 kB | 0 âœ… |

**Total:** 243.6 kB â†’ 249.7 kB (+6.1 kB / +2.5%) ðŸŸ¡

_2 changed_

---

_Generated by [Bundle Badger](https://gitlab.com/mbuga/bundle-badger)_
```
